/**
 * SCSS Mixins
 * Reusable mixins for common styling patterns
 */

@use 'variables' as *;

// ============================================================================
// Responsive Mixins
// ============================================================================

// Media Query Mixin
@mixin media-breakpoint-up($breakpoint) {
  @if $breakpoint == sm {
    @media (min-width: $breakpoint-sm) { @content; }
  } @else if $breakpoint == md {
    @media (min-width: $breakpoint-md) { @content; }
  } @else if $breakpoint == lg {
    @media (min-width: $breakpoint-lg) { @content; }
  } @else if $breakpoint == xl {
    @media (min-width: $breakpoint-xl) { @content; }
  } @else if $breakpoint == 2xl {
    @media (min-width: $breakpoint-2xl) { @content; }
  }
}

@mixin media-breakpoint-down($breakpoint) {
  @if $breakpoint == sm {
    @media (max-width: ($breakpoint-sm - 1px)) { @content; }
  } @else if $breakpoint == md {
    @media (max-width: ($breakpoint-md - 1px)) { @content; }
  } @else if $breakpoint == lg {
    @media (max-width: ($breakpoint-lg - 1px)) { @content; }
  } @else if $breakpoint == xl {
    @media (max-width: ($breakpoint-xl - 1px)) { @content; }
  } @else if $breakpoint == 2xl {
    @media (max-width: ($breakpoint-2xl - 1px)) { @content; }
  }
}

// Responsive Font Size
@mixin responsive-font-size($min-size, $max-size, $min-width: $breakpoint-sm, $max-width: $breakpoint-xl) {
  font-size: $min-size;
  
  @media (min-width: $min-width) {
    font-size: calc(#{$min-size} + (#{$max-size} - #{$min-size}) * ((100vw - #{$min-width}) / (#{$max-width} - #{$min-width})));
  }
  
  @media (min-width: $max-width) {
    font-size: $max-size;
  }
}

// ============================================================================
// Flexbox Mixins
// ============================================================================

// Flex Center (both axes)
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flex Center (vertical)
@mixin flex-center-vertical {
  display: flex;
  align-items: center;
}

// Flex Center (horizontal)
@mixin flex-center-horizontal {
  display: flex;
  justify-content: center;
}

// Flex Space Between
@mixin flex-space-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

// Flex Column
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Flex Wrap
@mixin flex-wrap {
  display: flex;
  flex-wrap: wrap;
}

// ============================================================================
// Grid Mixins
// ============================================================================

// Grid Center
@mixin grid-center {
  display: grid;
  place-items: center;
}

// Grid Columns
@mixin grid-columns($columns, $gap: $spacing-4) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

// Grid Auto Fit
@mixin grid-auto-fit($min-width, $gap: $spacing-4) {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax($min-width, 1fr));
  gap: $gap;
}

// Grid Auto Fill
@mixin grid-auto-fill($min-width, $gap: $spacing-4) {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax($min-width, 1fr));
  gap: $gap;
}

// ============================================================================
// Typography Mixins
// ============================================================================

// Text Truncate
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Line Clamp (multiline truncate)
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// Text Gradient
@mixin text-gradient($gradient) {
  background: $gradient;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

// Font Smoothing
@mixin font-smoothing {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// ============================================================================
// Background & Gradient Mixins
// ============================================================================

// Background Gradient
@mixin background-gradient($start-color, $end-color, $direction: to bottom right) {
  background: linear-gradient($direction, $start-color, $end-color);
}

// Background Pattern
@mixin background-pattern($pattern-color: rgba(0, 0, 0, 0.05), $pattern-size: 20px) {
  background-image: 
    linear-gradient(45deg, $pattern-color 25%, transparent 25%),
    linear-gradient(-45deg, $pattern-color 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, $pattern-color 75%),
    linear-gradient(-45deg, transparent 75%, $pattern-color 75%);
  background-size: $pattern-size $pattern-size;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}

// Background Overlay
@mixin background-overlay($color: rgba(0, 0, 0, 0.5), $z-index: 1) {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: $color;
    z-index: $z-index;
  }
  
  & > * {
    position: relative;
    z-index: $z-index + 1;
  }
}

// ============================================================================
// Border & Shadow Mixins
// ============================================================================

// Border with Hover Effect
@mixin border-hover($border-color: $border-light, $hover-color: $primary) {
  border: $border-width-1 solid $border-color;
  transition: border-color $transition-duration-200 $transition-timing-ease;
  
  &:hover,
  &:focus {
    border-color: $hover-color;
  }
}

// Shadow with Hover Effect
@mixin shadow-hover($shadow: $shadow-base, $hover-shadow: $shadow-md) {
  box-shadow: $shadow;
  transition: box-shadow $transition-duration-200 $transition-timing-ease;
  
  &:hover {
    box-shadow: $hover-shadow;
  }
}

// Inner Shadow
@mixin inner-shadow($shadow: $shadow-inner) {
  box-shadow: $shadow;
}

// ============================================================================
// Button Mixins
// ============================================================================

// Button Base
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $button-padding-y $button-padding-x;
  font-weight: $button-font-weight;
  line-height: $line-height-normal;
  border-radius: $button-border-radius;
  border: $border-width-1 solid transparent;
  cursor: pointer;
  transition: all $transition-duration-200 $transition-timing-ease;
  user-select: none;
  text-decoration: none;
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// Button Variant
@mixin button-variant($background, $color, $hover-background: darken($background, 10%)) {
  background-color: $background;
  color: $color;
  border-color: $background;
  
  &:hover:not(:disabled) {
    background-color: $hover-background;
    border-color: $hover-background;
  }
  
  &:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba($background, 0.3);
  }
}

// Button Outline
@mixin button-outline($color, $hover-color: $color) {
  background-color: transparent;
  color: $color;
  border-color: $color;
  
  &:hover:not(:disabled) {
    background-color: $color;
    color: white;
  }
  
  &:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba($color, 0.3);
  }
}

// ============================================================================
// Form Mixins
// ============================================================================

// Input Base
@mixin input-base {
  display: block;
  width: 100%;
  padding: $input-padding-y $input-padding-x;
  font-family: $font-family-sans;
  font-size: $font-size-base;
  line-height: $line-height-normal;
  color: var(--color-text-primary);
  background-color: var(--color-background);
  border: $input-border-width solid var(--color-border);
  border-radius: $input-border-radius;
  transition: border-color $transition-duration-150 $transition-timing-ease;
  
  &:focus {
    outline: none;
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 3px rgba($primary-400, 0.1);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  &::placeholder {
    color: var(--color-text-muted);
  }
}

// Form Control
@mixin form-control {
  @include input-base;
  
  &-sm {
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-sm;
  }
  
  &-lg {
    padding: $spacing-3 $spacing-4;
    font-size: $font-size-lg;
  }
}

// Form Label
@mixin form-label {
  display: block;
  margin-bottom: $spacing-1;
  font-weight: $font-weight-medium;
  color: var(--color-text-primary);
}

// Form Help Text
@mixin form-help-text {
  display: block;
  margin-top: $spacing-1;
  font-size: $font-size-sm;
  color: var(--color-text-muted);
}

// ============================================================================
// Card Mixins
// ============================================================================

// Card Base
@mixin card-base {
  background-color: var(--color-background-card);
  border-radius: $card-border-radius;
  box-shadow: $card-box-shadow;
  overflow: hidden;
  transition: all $transition-duration-200 $transition-timing-ease;
}

// Card Padding
@mixin card-padding($padding: $card-padding) {
  padding: $padding;
}

// Card Header
@mixin card-header {
  padding: $card-padding;
  border-bottom: $border-width-1 solid var(--color-border);
}

// Card Body
@mixin card-body {
  padding: $card-padding;
}

// Card Footer
@mixin card-footer {
  padding: $card-padding;
  border-top: $border-width-1 solid var(--color-border);
}

// ============================================================================
// Table Mixins
// ============================================================================

// Table Base
@mixin table-base {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

// Table Header Cell
@mixin table-header-cell {
  padding: $table-cell-padding;
  font-weight: $table-header-font-weight;
  text-align: left;
  color: var(--color-text-primary);
  background-color: var(--color-background);
  border-bottom: $table-border-width solid var(--color-border);
}

// Table Cell
@mixin table-cell {
  padding: $table-cell-padding;
  border-bottom: $table-border-width solid var(--color-border);
  color: var(--color-text-primary);
}

// Table Striped
@mixin table-striped {
  tbody tr:nth-of-type(odd) {
    background-color: var(--color-background);
  }
  
  tbody tr:nth-of-type(even) {
    background-color: var(--color-background-card);
  }
}

// Table Hover
@mixin table-hover {
  tbody tr {
    transition: background-color $transition-duration-150 $transition-timing-ease;
    
    &:hover {
      background-color: rgba($primary-100, 0.3);
    }
  }
}

// ============================================================================
// Animation Mixins
// ============================================================================

// Fade In
@mixin fade-in($duration: $transition-duration-300) {
  animation: fadeIn $duration $transition-timing-ease;
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}

// Slide In
@mixin slide-in($direction: 'up', $duration: $transition-duration-300) {
  animation: slideIn $duration $transition-timing-ease;
  
  @if $direction == 'up' {
    @keyframes slideIn {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  } @else if $direction == 'down' {
    @keyframes slideIn {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  } @else if $direction == 'left' {
    @keyframes slideIn {
      from {
        transform: translateX(20px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  } @else if $direction == 'right' {
    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  }
}

// Scale In
@mixin scale-in($duration: $transition-duration-300) {
  animation: scaleIn $duration $transition-timing-ease;
  
  @keyframes scaleIn {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
}

// Pulse Animation
@mixin pulse($color: $primary) {
  animation: pulse 2s $transition-timing-ease-in-out infinite;
  
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba($color, 0.7);
    }
    70% {
      box-shadow: 0 0 0 10px rgba($color, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba($color, 0);
    }
  }
}

// Spin Animation
@mixin spin($duration: 1s) {
  animation: spin $duration linear infinite;
  
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
}

// Bounce Animation
@mixin bounce {
  animation: bounce 1s $transition-timing-bounce infinite;
  
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }
}

// ============================================================================
// Utility Mixins
// ============================================================================

// Clearfix
@mixin clearfix {
  &::after {
    content: '';
    display: table;
    clear: both;
  }
}

// Visually Hidden (for screen readers)
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Print Styles
@mixin print {
  @media print {
    @content;
  }
}

// Dark Mode
@mixin dark-mode {
  @media (prefers-color-scheme: dark) {
    @content;
  }
}

// High Contrast Mode
@mixin high-contrast {
  @media (prefers-contrast: high) {
    @content;
  }
}

// Reduced Motion
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}